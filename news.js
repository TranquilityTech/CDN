AOS.init();let userLanguage="en";fetch(`https://cdn.jsdelivr.net/gh/TranquilityTech/tqi18n@1.0.1/${userLanguage}/translation.json`).then(e=>e.json()).then(e=>{i18next.init({lng:`${userLanguage}`,resources:{userLanguage:{translation:e}}})}).catch(e=>console.error(e));const Toast=Swal.mixin({toast:!0,type:"success",position:"bottom-start",showConfirmButton:!1,timer:2e3,timerProgressBar:!0,background:"rgba(47, 47, 47)",didOpen:e=>{e.addEventListener("mouseenter",Swal.stopTimer),e.addEventListener("mouseleave",Swal.resumeTimer)}});function getParameterByName(e,t=window.location.href){e=e.replace(/[\[\]]/g,"\\$&");let n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}document.addEventListener("scroll",()=>{let e=window.scrollY;e>10?document.getElementById("app-header").classList.add("hidden"):e<10&&document.getElementById("app-header").classList.remove("hidden")});let getLatest=()=>{let e=getParameterByName("uid")||window.location.pathname.split("/")[2];fetch("/news/latest",{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json","CSRF-Token":$STATE.csrfToken},credentials:"include",body:JSON.stringify({uid:e})}).then(e=>e.json()).then(e=>{lozad(".lozad",{rootMargin:"300px 0px",threshold:.1,enableAutoReload:!0}).observe(),200===e.status&&(document.getElementById("news").innerHTML=e.template),new Progressive({el:"body",lazyClass:"progressive-img",removePreview:!0,scale:!1}).fire(),AOS.refresh()})},getRelated=()=>{fetch("/news/related",{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json","CSRF-Token":$STATE.csrfToken},credentials:"include",body:JSON.stringify({uid:getParameterByName("uid")})}).then(e=>e.json()).then(e=>{lozad(".lozad",{rootMargin:"300px 0px",threshold:.1,enableAutoReload:!0}).observe(),200===e.status&&(document.getElementById("news-related-result").innerHTML=e.template),AOS.refresh()})},getSearch=()=>{fetch("/news/search",{method:"POST",headers:{Accept:"application/json, text/plain, */*","Content-Type":"application/json","CSRF-Token":$STATE.csrfToken},credentials:"include",body:JSON.stringify({query:getParameterByName("q")})}).then(e=>e.json()).then(e=>{lozad(".lozad",{rootMargin:"300px 0px",threshold:.1,enableAutoReload:!0}).observe(),200===e.status&&(document.getElementById("news").innerHTML=e.template),new Progressive({el:"body",lazyClass:"progressive-img",removePreview:!0,scale:!1}).fire(),AOS.refresh()})};function copyToClipboard(e){let t=document.createElement("input");document.body.appendChild(t),t.setAttribute("value",e),t.select(),document.execCommand("copy"),document.body.removeChild(t)}function shareNews(){let e=event.currentTarget.dataset.url;e&&(copyToClipboard(e),Toast.fire({icon:"success",title:"Link copied"}))}function newsSaveToCollection(){Toast.fire({icon:"error",title:`${i18next.t("Please login to continue")}`})}getParameterByName("uid")||window.location.pathname.split("/")[2]?(getLatest(),getRelated()):getParameterByName("q")?(getSearch(),document.title=`${getParameterByName("q")} related news | Tranquility News`,document.getElementById("app-header").innerHTML=`\n        <a href="/news?q=${getParameterByName("q")}" title="${getParameterByName("q")} related news | Tranquility News">\n            <h1 class="header_title">${getParameterByName("q")} Related News</h1>\n        </a>\n\n        <a href="/" title="Tranquility 國際社群">\n            <div class="icon-button"><i class="fas fa-sign-in-alt"></i> <span>Login</span></div>\n        </a>\n    `):getLatest();